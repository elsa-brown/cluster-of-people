var e={fetchPoem:()=>new Promise(((e,t)=>{const n=localStorage.getItem("poem");n?e(JSON.parse(n)):fetch("https://www.googleapis.com/blogger/v3/blogs/7016348522142105165/posts/8040682582405624765?key=AIzaSyAXjsB22TjNEYJy-HDC-bpMvIs9BOqxRi4").then((e=>{if(e.ok)return e.json();throw new Error(`BLOGGER API ${e.status} ${e.statusText}`)})).then((t=>{localStorage.setItem("poem",JSON.stringify(t)),e(t)})).catch((e=>t(e)))})),parsePoem:e=>{const{title:t,content:n,url:r}=e,i=n.trim().replace(/(\r\n|\n|\r)/gm,"").split("<br /><br /><br />"),[o,a]=i;return{title:t,content:[o.split("<br /><br />"),a],url:r.replace("http","https")}},getScreenOrientation:()=>screen.orientation.type.match(/portrait/)?"portrait":"landscape"},t={};"undefined"!=typeof self&&self,t=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MobileOrientation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(1);var o=c(n(2)),a=c(n(3)),s=c(n(4)),u=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}var l=new a.default,f=[],d=o.default.name,p="resize",h="portrait",v="landscape",b=/iPad|iPhone|iPod/;t.MobileOrientation=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._detect=function(){t.detectPortrait(),t.detectLandscape()},this.detectPortrait=function(){(t._isPortrait||t.isDesktop)&&(t.setState("portrait"),t.emit(h))},this.detectLandscape=function(){t._isLandscape&&t.isMobile&&(t.setState("landscape"),t.emit(v))},this.options=r({},{debug:!1,withTouch:!1,debounceTime:50,portraitMediaQuery:"screen and (max-device-aspect-ratio: 1/1)",landscapeMediaQuery:"all"},n),this.setState(null),this.debounceDetect(),window.addEventListener(p,this.detect),window.dispatchEvent(new window.CustomEvent(p))}return i(e,[{key:"debounceDetect",value:function(){var e=this;this.detect=(0,u.default)((function(){e._detect(),e.emit(p)}),this.options.debounceTime)}},{key:"setState",value:function(e){this.state=e}},{key:"log",value:function(e){console.warn(s.default.words(d)+": "+(0,s.default)(e)+".")}},{key:"isTruthy",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).some((function(e){return!0===e}))}},{key:"isAllTruthy",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(e){return!0===e}))}},{key:"emit",value:function(e){l.emit(e,this.state)}},{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};-1!==this.events.indexOf(e)&&l.subscribe(e,t)}},{key:"destroy",value:function(){window.removeEventListener(p,this.detect)}},{key:"isMobile",get:function(){var e=[],t=this.isIos,n=this.isIosFallback,r=this.isIosOrAndroid,i=this.isTouchDevice;return e.push(r,t,n),this.options.withTouch&&e.push(i),this.isTruthy(e)}},{key:"isIos",get:function(){var e=[];return e.push(!!window.navigator.platform),e.push(b.test(window.navigator.platform)),this.isAllTruthy(e)}},{key:"isIosFallback",get:function(){var e=[];return e.push(!window.MSStream),e.push(b.test(window.navigator.userAgent)),this.isAllTruthy(e)}},{key:"isIosOrAndroid",get:function(){return f.length}},{key:"isTouchDevice",get:function(){var e=[];return e.push(window.navigator.msMaxTouchPoints),e.push("onmsgesturechange"in window),e.push("ontouchstart"in document),this.isTruthy(e)}},{key:"isDesktop",get:function(){return!this.isMobile}},{key:"isPortrait",get:function(){return"portrait"===this.state}},{key:"isLandscape",get:function(){return"landscape"===this.state}},{key:"_isPortrait",get:function(){var e=[];return window.matchMedia?e.push(window.matchMedia(this.options.portraitMediaQuery).matches):this.isDebug&&this.log("incompatible browser"),this.isTruthy(e)}},{key:"_isLandscape",get:function(){var e=[];return e.push(!this._isPortrait),window.matchMedia?e.push(window.matchMedia(this.options.landscapeMediaQuery).matches):this.debug&&this.log("incompatible browser"),this.isAllTruthy(e)}},{key:"events",get:function(){return[p,h,v]}},{key:"debug",get:function(){return this.options.debug}}]),e}()},function(e,t){try{var n=new window.CustomEvent("test");if(n.preventDefault(),!0!==n.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var r=function(e,t){var n,r;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};r.prototype=window.Event.prototype,window.CustomEvent=r}},function(e,t){e.exports={name:"mobile-orientation",version:"2.1.2",description:"",main:"dist",scripts:{bundle:"npx webpack --config webpack.js"},repository:{type:"git",url:"https://github.com/adi518/mobile-orientation.git"},author:"",license:"ISC",devDependencies:{"babel-cli":"^6.26.0","babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-plugin-array-includes":"^2.0.3","babel-plugin-transform-class-properties":"^6.24.1","babel-plugin-transform-es2015-arrow-functions":"^6.22.0","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-preset-env":"^1.6.1","babel-preset-es2015":"^6.24.1","babel-preset-stage-2":"^6.24.1",ssri:"^5.2.4","uglifyjs-webpack-plugin":"^1.1.6",webpack:"^3.10.0"},dependencies:{capitalize:"^1.0.0","custom-event-polyfill":"^0.3.0","es6-emitter":"^1.0.1","lodash.debounce":"^4.0.8"}}},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new Map(t)}return r(e,[{key:"subscribe",value:function(e,t){var n=this;return this.events.set(e,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.events.has(e)?this.events.get(e):[]),[t])),function(){return n.events.set(e,n.events.get(e).filter((function(e){return e!==t})))}}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.events.has(e)&&this.events.get(e).map((function(e){return e.apply(void 0,n)}))}}]),e}();e.exports=i},function(e,t){e.exports=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},e.exports.words=function(e){return e.replace(/(^|[^a-zA-Z\u00C0-\u017F'])([a-zA-Z\u00C0-\u017F])/g,(function(e){return e.toUpperCase()}))}},function(e,t,n){(function(t){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),p=Object.prototype.toString,h=Math.max,v=Math.min,b=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||(n=t)&&"object"==typeof n&&p.call(t)==i)return r;var t,n;if(m(e)){var l="function"==typeof e.valueOf?e.valueOf():e;e=m(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var f=s.test(e);return f||u.test(e)?c(e.slice(2),f?2:8):a.test(e)?r:+e}e.exports=function(e,t,r){var i,o,a,s,u,c,l=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function g(t){var n=i,r=o;return i=o=void 0,l=t,s=e.apply(r,n)}function w(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=a}function k(){var e,n,r=b();if(w(r))return O(r);u=setTimeout(k,(n=t-((e=r)-c),d?v(n,a-(e-l)):n))}function O(e){return u=void 0,p&&i?g(e):(i=o=void 0,s)}function M(){var e,n=b(),r=w(n);if(i=arguments,o=this,c=n,r){if(void 0===u)return l=e=c,u=setTimeout(k,t),f?g(e):s;if(d)return u=setTimeout(k,t),g(c)}return void 0===u&&(u=setTimeout(k,t)),s}return t=y(t)||0,m(r)&&(f=!!r.leading,a=(d="maxWait"in r)?h(y(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p),M.cancel=function(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0},M.flush=function(){return void 0===u?s:O(b())},M}}).call(t,n(6))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]);const{errorMessage:n,fetchPoem:r,parsePoem:i,getScreenOrientation:o}=e;let a,s;const u=()=>{a.classList.add("hide"),s.classList.remove("hide")},c=()=>{a.classList.remove("hide"),s.classList.add("hide")},l=async()=>{const e=new(0,t.MobileOrientation),n=document.querySelector("main"),l=await r(),{title:f,content:d}=await i(l),[p,h]=d;a=document.querySelector(".js-portrait"),s=document.querySelector(".js-landscape");"portrait"===o()?c():u(),e.on("landscape",(()=>u())),e.on("portrait",(()=>c()));const v=s.querySelector("h1"),b=document.createElement("a");b.href="https://github.com/elsa-brown/cluster-of-people",b.target="_blank",b.rel="noopener noreferrer",b.innerHTML=f,v.appendChild(b);const m=document.createElement("section");m.className="text",n.appendChild(m),p.forEach((e=>{const t=document.createElement("p");t.innerHTML=e,m.appendChild(t)}));const y=document.createElement("section");y.className="images",n.appendChild(y),y.innerHTML=h,y.insertAdjacentHTML("beforeend","<br />")};"loading"===document.readyState?window.addEventListener("DOMContentLoaded",l):l();
//# sourceMappingURL=index.a53a6ee1.js.map
